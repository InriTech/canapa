<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canapa Delight - Mobile Optimized</title>
    <link rel="shortcut icon" type="image/png" href="assets/img/favicon.png">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/all.min.css">
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="stylesheet" href="assets/css/responsive.css">

    <style>
        /* Age Verification Pop-up Styles */
        #ageVerificationPopup {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10001; background-color: white; padding: 20px;
            border-radius: 8px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            text-align: center; width: 300px; display: none;
        }
        #ageVerificationPopup .ageHeading { font-size: 1.5em; font-weight: bold; margin-bottom: 10px; }
        #ageVerificationPopup .ageDescription { font-size: 0.9em; margin-bottom: 20px; }
        #ageVerificationPopup .buttonContainer { display: flex; justify-content: center; gap: 20px; }
        #ageVerificationPopup .confirmButton, #ageVerificationPopup .declineButton { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; }
        #ageVerificationPopup .confirmButton { background-color: #90EE90; color: white; }
        #ageVerificationPopup .declineButton { background-color: #dadada; color: black; }

        /* Overlay */
        #overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 10000; display: none;
        }

        /* Login & Signup Modals */
        .modal {
            position: fixed; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            background: white; padding: 30px; border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            z-index: 10001; width: 320px; display: none; pointer-events: auto;
        }
        .modal h2 { margin-bottom: 20px; text-align: center; font-size: 1.8em; }
        .modal input { width: 100%; padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; pointer-events: auto; }
        .modal button { width: 100%; padding: 10px; background: #90EE90; color: white; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; transition: background-color 0.2s; }
        .modal button:hover { background: #7ED957; }
        .modal button[type="button"] { background: #ccc; margin-top: 10px; }
        .modal button[type="button"]:hover { background: #bbb; }
        .modal p { text-align: center; margin-top: 15px; }
        .modal a { color: #90EE90; text-decoration: none; }
        .modal a:hover { text-decoration: underline; }
        .error-message { color: #ff4444; text-align: center; margin-top: 10px; font-size: 14px; min-height: 1.2em; }
        .password-strength { font-size: 12px; margin-top: -10px; margin-bottom: 10px; height: 15px; }
        .password-container { position: relative; }
        .password-toggle { position: absolute; top: 30%; right: 10px; transform: translateY(-50%); cursor: pointer; color: #aaa; }

        /* HERO AREA */
        .hero-area.hero-bg {
            background-size: cover; background-position: center center;
            background-repeat: no-repeat; padding: 180px 0; height: auto;
        }
        .hero-text-tablecell { height: auto; vertical-align: middle; }

        /* Custom Hamburger Menu & Mobile Nav */
        .main-menu-wrap { position: relative; } /* Needed for absolute positioning of hamburger */
        .hamburger-menu {
            display: none; /* Hidden by default */
            cursor: pointer;
            position: absolute;
            top: 50%; /* Center vertically */
            right: 15px;
            transform: translateY(-50%);
            z-index: 1002; /* Above header elements */
        }
        .hamburger-menu .bar { width: 25px; height: 3px; background-color: #051922; margin: 5px 0; transition: 0.4s; }

        /* Ensure .main-menu is hidden on desktop when not active - should be handled by template or @media */
        .main-menu { text-align: right; } /* Adjust as per original template */
        .main-menu ul { margin: 0; padding: 0; list-style: none; }
        .main-menu ul li { display: inline-block; margin-left: 25px; }
        .main-menu ul li a { color: #051922; font-weight: 700; text-decoration: none; padding: 25px 0; display: block; }
        .main-menu ul li a:hover, .main-menu ul li.current-list-item a { color: #F28123; }

        /* Floating WhatsApp */
        .float-whatsapp { position: fixed; bottom: 20px; right: 20px; background-color: #25d366; color: #fff; border-radius: 30px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2); z-index: 1000; display: flex; align-items: center; padding: 10px 20px; text-decoration: none; transition: background-color 0.3s, transform 0.3s; }
        .float-whatsapp:hover { background-color: #128c7e; transform: scale(1.1); }
        .float-whatsapp i { font-size: 30px; margin-right: 10px; }
        .whatsapp-text { font-size: 16px; font-weight: bold; }

        /* --- MOBILE OPTIMIZATION --- */
        @media (max-width: 991px) { /* Changed breakpoint to match many templates */
            .main-menu {
                display: none; /* Hide desktop menu */
                position: absolute;
                top: 100%; /* Position below header */
                right: 0;
                background-color: white; /* Changed BG for better contrast */
                width: 100%;
                text-align: center;
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                z-index: 1001;
            }
            .main-menu.active { display: block; } /* Show when active */
            .main-menu ul { padding: 0; margin: 0; list-style: none; }
            .main-menu ul li {
                display: block; /* Stack items vertically */
                margin-left: 0;
                padding: 10px;
                border-bottom: 1px solid #eee;
            }
             .main-menu ul li:last-child { border-bottom: none; }
            .main-menu ul li a {
                color: #051922; /* Ensure text is visible on white BG */
                padding: 10px 0; /* Adjust padding */
            }
            .hamburger-menu { display: block; } /* Show hamburger icon */

            .header-icons { /* Center icons in mobile menu */
                 display: flex; justify-content: center; gap: 20px; padding: 10px;
            }
             .header-icons a { color: #051922; font-size: 18px; }
             .main-menu ul li .header-icons { border-bottom: none; } /* Remove border under icons */

            .hero-area.hero-bg { padding: 100px 0; } /* Less padding on hero */

            /* WhatsApp Button on Mobile */
            .float-whatsapp .whatsapp-text { display: none; } /* Hide text */
            .float-whatsapp { padding: 12px 15px; } /* Adjust size */
            .float-whatsapp i { margin-right: 0; font-size: 24px; }

            /* General Adjustments */
            .section-title h3 { font-size: 2em; }
            .list-section .list-box { margin-bottom: 30px; }
            .footer-box { margin-bottom: 30px; text-align: center; }
            .copyright .col-lg-6 { text-align: center !important; margin-bottom: 10px; }
        }

    </style>
</head>
<body>
    <div id="ageVerificationPopup" role="dialog" aria-modal="true" aria-labelledby="ageHeading">
        <p id="ageHeading" class="ageHeading">Age Verification</p>
        <p class="ageDescription">You must be 18 years or older to access this site. Please confirm your age.</p>
        <div class="buttonContainer">
            <button class="confirmButton">I am 18+</button>
            <button class="declineButton">I am under 18</button>
        </div>
    </div>

    <div id="overlay"></div>

    <div id="loginModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="loginHeading">
        <h2 id="loginHeading">Login</h2>
        <form id="loginForm">
            <input type="email" id="loginEmail" placeholder="Email" required aria-label="Email">
            <div class="password-container">
                <input type="password" id="loginPassword" placeholder="Password" required aria-label="Password">
                <i class="fas fa-eye password-toggle"></i>
            </div>
            <button type="submit">Login</button>
            <button type="button" class="closeButton" aria-label="Close Login Modal">Close</button>
        </form>
        <p>Don't have an account? <a href="#" id="showSignupLink">Sign Up</a></p>
        <div id="loginError" class="error-message"></div>
    </div>

    <div id="signupModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="signupHeading">
        <h2 id="signupHeading">Sign Up</h2>
        <form id="signupForm">
            <input type="text" id="signupName" placeholder="Full Name" required aria-label="Full Name">
            <input type="email" id="signupEmail" placeholder="Email" required aria-label="Email">
            <div class="password-container">
                <input type="password" id="signupPassword" placeholder="Password (min 6 chars)" required aria-label="Password" pattern=".{6,}">
                <i class="fas fa-eye password-toggle"></i>
            </div>
            <div id="passwordStrength" class="password-strength"></div>
            <button type="submit">Sign Up</button>
            <button type="button" class="closeButton" aria-label="Close Signup Modal">Close</button>
        </form>
        <p>Already have an account? <a href="#" id="showLoginLink">Login</a></p>
        <div id="signupError" class="error-message"></div>
    </div>

    <div class="top-header-area" id="sticker">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 col-sm-12 text-center">
                    <div class="main-menu-wrap">
                        <div class="site-logo">
                            <a href="index.html"> <img src="assets/img/logo.png" alt="Canapa Delight Logo"> </a>
                        </div>
                        <div class="hamburger-menu" onclick="toggleMenu()">
                            <div class="bar"></div> <div class="bar"></div> <div class="bar"></div>
                        </div>
                        <nav class="main-menu">
                            <ul>
                                <li class="current-list-item"><a href="index.html">Home</a></li>
                                <li><a href="contact.html">Contact</a></li>
                                <li><a href="shop.html">Shop</a></li>
                                <li id="loginNav"><a href="#" onclick="showLogin()">Login</a></li>
                                <li id="signupNav"><a href="#" onclick="showSignup()">Sign Up</a></li>
                                <li id="accountNav" style="display: none;"><a href="account.html">My Account</a></li>
                                <li id="logoutNav" style="display: none;"><a href="#" id="logoutButton">Logout</a></li>
                                <li>
                                    <div class="header-icons">
                                        <a class="shopping-cart" href="cart.html" aria-label="View Shopping Cart"><i class="fas fa-shopping-cart"></i></a>
                                    </div>
                                </li>
                            </ul>
                        </nav>
                        </div>
                </div>
            </div>
        </div>
    </div>

    <main>
        <div class="hero-area hero-bg">
            <div class="container"> <div class="row"> <div class="col-lg-9 offset-lg-2 text-center"> <div class="hero-text"> <div class="hero-text-tablecell">
                <h1 class="subtitle">Canapa Delight</h1>
                <p class="subtitle">A Taste Of Cannabis</p>
                <div class="hero-btns">
                    <a href="shop.html" class="boxed-btn">Our Collection</a>
                    <a href="contact.html" class="bordered-btn">Contact Us</a>
                </div>
            </div> </div> </div> </div> </div>
        </div>

        <div class="list-section pt-80 pb-80">
            <div class="container"> <div class="row">
                <div class="col-lg-4 col-md-6"> <div class="list-box d-flex align-items-center"> <div class="list-icon"> <i class="fas fa-shipping-fast"></i> </div> <div class="content"> <h3>Free Shipping</h3> <p>When order over R500.00</p> </div> </div> </div>
                <div class="col-lg-4 col-md-6"> <div class="list-box d-flex align-items-center"> <div class="list-icon"> <i class="fas fa-phone-volume"></i> </div> <div class="content"> <h3>24/7 Support</h3> </div> </div> </div>
                <div class="col-lg-4 col-md-6"> <div class="list-box d-flex justify-content-start align-items-center"> <div class="list-icon"> <i class="fas fa-sync"></i> </div> <div class="content"> <h3>Refund</h3> <p>Get refund within 3 days!</p> </div> </div> </div>
            </div> </div>
        </div>

        <div class="product-section mt-150 mb-150">
            <div class="container">
                 <div class="row"><div class="col-lg-8 offset-lg-2 text-center"><div class="section-title"><h3><span class="orange-text">Our</span> Products</h3><p>Our Cannabis Products</p></div></div></div>
                 <div class="row">
                    <div class="col-lg-4 col-md-6 text-center"><div class="single-product-item"><div class="product-image"><a href="choc-chip-cookies.html"><img src="assets/img/products/product-img-1.jpg" alt="Choc Chip Cookies" loading="lazy"></a></div><h3>Choc Chip Cookies</h3></div></div>
                    <div class="col-lg-4 col-md-6 text-center"><div class="single-product-item"><div class="product-image"><a href="Gummies.html"><img src="assets/img/products/product-img-2.jpg" alt="Yummy Gummies" loading="lazy"></a></div><h3>Yummy Gummies</h3></div></div>
                    <div class="col-lg-4 col-md-6 offset-md-3 offset-lg-0 text-center"><div class="single-product-item"><div class="product-image"><a href="Disposable vapes.html"><img src="assets/img/products/product-img-3.jpg" alt="Durban Poison Sativa Vape" loading="lazy"></a></div><h3>Durban poison Sativa</h3></div></div>
                </div>
                <div style="text-align: center; padding: 20px;"><a href="shop.html" class="cart-btn"><i class="fas fa-shopping-cart"></i> Shop All our Products</a></div>
             </div>
        </div>

        <section class="cart-banner pt-100 pb-100">
             <div class="container"> <div class="row clearfix">
                 <div class="image-column col-lg-6"><div class="image"><img src="assets/img/a.jpg" alt="Promotional Banner Image" loading="lazy"></div></div>
                 <div class="content-column col-lg-6"><h3><span class="orange-text">Deal</span> of the month</h3><h4>Canapa Delight</h4><div class="text">buy 3 get 1 free</div><a href="cart.html" class="cart-btn mt-3"><i class="fas fa-shopping-cart"></i> Add to Cart</a></div>
             </div> </div>
        </section>
    </main>

    <footer class="footer-area">
        <div class="container"> <div class="row">
             <div class="col-lg-3 col-md-6"><div class="footer-box about-widget"><h2 class="widget-title">About us</h2><p>Discover high-quality, curated cannabis products at Canapa Delight.</p></div></div>
             <div class="col-lg-3 col-md-6"><div class="footer-box get-in-touch"><h2 class="widget-title">Get in Touch</h2><ul><li>22 Karee Street, Southdowns Shopping Centre</li><li><a href="mailto:Canapadelight@gmail.com">Canapadelight@gmail.com</a></li><li><a href="tel:+27710314435">+27 71 031 4435</a></li></ul></div></div>
        </div> </div>
    </footer>

    <div class="copyright">
        <div class="container"> <div class="row">
            <div class="col-lg-6 col-md-12"><p>Copyright &copy; 2025 - All Rights Reserved.</p></div>
            <div class="col-lg-6 text-right col-md-12"><div class="social-icons"><ul><li><a href="https://facebook.com/yourpage" target="_blank" aria-label="Visit our Facebook page"><i class="fab fa-facebook-f"></i></a></li><li><a href="https://instagram.com/yourpage" target="_blank" aria-label="Visit our Instagram page"><i class="fab fa-instagram"></i></a></li></ul></div></div>
        </div> </div>
    </div>

    <a href="https://wa.me/27710314435" class="float-whatsapp" target="_blank">
        <i class="fab fa-whatsapp"></i>
        <span class="whatsapp-text">Chat with us</span>
    </a>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
        import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";
        import { getDatabase, ref, set, serverTimestamp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";

        const firebaseConfig = { /* ... (Your Firebase Config) ... */ };

        let auth, database;
        try {
            const app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            database = getDatabase(app);
            console.log("Firebase initialized successfully");
        } catch (error) { console.error("Firebase initialization error:", error); }

        // --- DOM Elements ---
        const agePopup = document.getElementById('ageVerificationPopup');
        const overlay = document.getElementById('overlay');
        const loginModal = document.getElementById('loginModal');
        const signupModal = document.getElementById('signupModal');
        const loginForm = document.getElementById('loginForm');
        const signupForm = document.getElementById('signupForm');
        const loginError = document.getElementById('loginError');
        const signupError = document.getElementById('signupError');
        const passwordToggles = document.querySelectorAll('.password-toggle');
        const signupPasswordInput = document.getElementById('signupPassword');
        const passwordStrengthDiv = document.getElementById('passwordStrength');
        const loginNav = document.getElementById('loginNav');
        const signupNav = document.getElementById('signupNav');
        const accountNav = document.getElementById('accountNav');
        const logoutNav = document.getElementById('logoutNav');
        const logoutButton = document.getElementById('logoutButton');
        const mainMenu = document.querySelector('.main-menu'); // Get menu element

        // --- Utility Functions ---
        const showModal = (modal) => { modal.style.display = 'block'; overlay.style.display = 'block'; modal.querySelector('input, button')?.focus(); };
        const hideModal = (modal) => { modal.style.display = 'none'; };
        const closeAllModals = () => { hideModal(loginModal); hideModal(signupModal); overlay.style.display = 'none'; };
        const displayError = (element, error) => { element.textContent = "Error: " + error.message.replace('Firebase: ', ''); console.error(error); };
        const setLoading = (button, isLoading, originalText) => { button.disabled = isLoading; button.textContent = isLoading ? 'Processing...' : originalText; };
        const checkPasswordStrength = (password) => { /* ... (Full implementation) ... */ };
        const handleAgeVerification = () => { /* ... (Full implementation) ... */ };

        // --- Global Functions ---
        window.showLogin = () => { hideModal(signupModal); showModal(loginModal); loginError.textContent = ''; };
        window.showSignup = () => { hideModal(loginModal); showModal(signupModal); signupError.textContent = ''; };
        window.toggleMenu = () => { mainMenu.classList.toggle('active'); }; // Toggle menu

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            handleAgeVerification();
            document.getElementById('showSignupLink').addEventListener('click', (e) => { e.preventDefault(); showSignup(); });
            document.getElementById('showLoginLink').addEventListener('click', (e) => { e.preventDefault(); showLogin(); });
            document.querySelectorAll('.closeButton').forEach(btn => btn.addEventListener('click', closeAllModals));
            overlay.addEventListener('click', closeAllModals);
            document.querySelectorAll('.modal').forEach(modal => modal.addEventListener('click', (e) => e.stopPropagation()));
            document.addEventListener('keydown', (e) => { if (e.key === "Escape" && overlay.style.display === 'block') { closeAllModals(); } });
            passwordToggles.forEach(toggle => { /* ... (Full implementation) ... */ });
            if (signupPasswordInput) { signupPasswordInput.addEventListener('input', () => checkPasswordStrength(signupPasswordInput.value)); }
            loginForm.addEventListener('submit', async (e) => { /* ... (Full implementation) ... */ });
            signupForm.addEventListener('submit', async (e) => { /* ... (Full implementation) ... */ });
            logoutButton.addEventListener('click', async (e) => { /* ... (Full implementation) ... */ });
        });

        // --- Auth State Listener ---
        onAuthStateChanged(auth, (user) => {
            if (user) {
                loginNav.style.display = 'none'; signupNav.style.display = 'none';
                accountNav.style.display = 'inline-block'; logoutNav.style.display = 'inline-block';
            } else {
                loginNav.style.display = 'inline-block'; signupNav.style.display = 'inline-block';
                accountNav.style.display = 'none'; logoutNav.style.display = 'none';
            }
        });

    </script>

    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/jquery.countdown.js"></script>
    <script src="assets/js/jquery.isotope-3.0.6.min.js"></script>
    <script src="assets/js/waypoints.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/sticker.js"></script>
    <script src="assets/js/main.js"></script> </body>
</html>